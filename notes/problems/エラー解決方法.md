# エラー解決方法：MODEL_OUTPUT_DIRが未定義

## エラーの原因

`NameError: name 'MODEL_OUTPUT_DIR' is not defined` が発生する理由：
- Cell 6（ダミーモデル作成）がCell 7（学習設定）より前に実行されている
- `MODEL_OUTPUT_DIR`はCell 7で定義されるため、Cell 6を先に実行すると未定義エラーが発生

## 解決方法

### 方法1: セルの実行順序を変更（推奨）

1. **Cell 1-4を順番に実行**（データセット定義とファイルリスト作成）
2. **Cell 7を実行**（学習設定 - `MODEL_OUTPUT_DIR`を定義）
3. **Cell 6を実行**（ダミーモデル作成）

これで`MODEL_OUTPUT_DIR`が定義された後にCell 6が実行されるため、エラーが解消されます。

### 方法2: Cell 6内で変数を定義

Cell 6のコードの最初に以下を追加：

```python
# 必要な変数が未定義の場合は自動的に定義
if 'OUTPUT_ROOT' not in globals():
    PROJECT_ROOT = Path.cwd().parent if Path.cwd().name == "notebooks" else Path.cwd()
    OUTPUT_ROOT = PROJECT_ROOT / "outputs"

if 'SPEAKER_ID' not in globals():
    SPEAKER_ID = "jvs002"

if 'MODEL_OUTPUT_DIR' not in globals():
    MODEL_OUTPUT_DIR = OUTPUT_ROOT / "tts_models" / SPEAKER_ID
    MODEL_OUTPUT_DIR.mkdir(parents=True, exist_ok=True)

if 'datasets' not in globals():
    datasets = {}  # 空の辞書を定義
```

### 方法3: 手動で変数を定義

Cell 6を実行する前に、新しいセルで以下を実行：

```python
# 必要な変数を定義
PROJECT_ROOT = Path.cwd().parent if Path.cwd().name == "notebooks" else Path.cwd()
OUTPUT_ROOT = PROJECT_ROOT / "outputs"
SPEAKER_ID = "jvs002"
MODEL_OUTPUT_DIR = OUTPUT_ROOT / "tts_models" / SPEAKER_ID
MODEL_OUTPUT_DIR.mkdir(parents=True, exist_ok=True)
```

## 推奨される実行順序

1. Cell 1: パスの設定とインポート
2. Cell 2: データセット定義の読み込み
3. Cell 3: ファイルパスの確認
4. Cell 4: ファイルリストの作成
5. **Cell 7: 学習設定（MODEL_OUTPUT_DIRを定義）** ← これを先に実行
6. Cell 6: ダミーモデル作成 ← その後で実行
7. その他のセル...

## 注意事項

- セルの実行順序が重要な場合があります
- 変数が未定義のエラーが出た場合は、その変数を定義するセルが実行されているか確認してください
